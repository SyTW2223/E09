(function(){"use strict";var e={6951:function(e,s,t){var o={};t.r(o);var r=t(9242),i=t(3396);const n={class:"page-content"};function a(e,s,t,o,r,a){const l=(0,i.up)("NavBar"),c=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(l),(0,i._)("div",n,[(0,i.Wm)(c)])])}var l=t.p+"img/logo.cec28936.png";const c={class:"navbar nav-bar navbar-expand-lg navbar-light bg-light"},u={class:"container"},d=(0,i._)("img",{height:"35",src:l},null,-1),p=(0,i._)("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,i._)("span",{class:"navbar-toggler-icon"})],-1),g={class:"collapse navbar-collapse",id:"navbarSupportedContent"},m={key:0,class:"navbar-nav"},h={class:"nav-item active"},w={class:"nav-item active"},_={key:1,class:"navbar-nav"},f={class:"nav-item active"},k={class:"nav-item active"};function v(e,s,t,o,r,n){const a=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("nav",c,[(0,i._)("div",u,[(0,i._)("div",null,[(0,i.Wm)(a,{class:"navbar-brand",onClick:n.closePages,to:"/"},{default:(0,i.w5)((()=>[d])),_:1},8,["onClick"])]),p,(0,i._)("div",g,[e.loggedUser?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("ul",m,[(0,i._)("li",h,[(0,i.Wm)(a,{class:"nav-link",onClick:n.closePages,to:"/signin"},{default:(0,i.w5)((()=>[(0,i.Uk)("Iniciar sesión")])),_:1},8,["onClick"])]),(0,i._)("li",w,[(0,i.Wm)(a,{class:"nav-link",onClick:n.closePages,to:"/signup"},{default:(0,i.w5)((()=>[(0,i.Uk)("Registrarse")])),_:1},8,["onClick"])])])),e.loggedUser?((0,i.wg)(),(0,i.iD)("ul",_,[(0,i._)("li",f,[(0,i._)("a",{class:"nav-link",href:"#",onClick:s[0]||(s[0]=e=>{n.signOut(),n.closePages()})},"Cerrar sesión")]),(0,i._)("li",k,[(0,i.Wm)(a,{class:"nav-link",onClick:s[1]||(s[1]=e=>{n.closePages(),n.loadProfileData()}),to:"/profile/"+e.loggedUser.name},{default:(0,i.w5)((()=>[(0,i.Uk)("Mi perfil")])),_:1},8,["to"])])])):(0,i.kq)("",!0)])])]),e.loggedUser?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"orange-btn",href:"#",onClick:s[2]||(s[2]=(...e)=>n.setNewJuice&&n.setNewJuice(...e))},"+")):(0,i.kq)("",!0)])}var b=t(65),y={name:"NavBar",methods:{signOut(){localStorage.removeItem("token"),this.$store.dispatch("setLoggedUser",null)},setNewJuice(){this.$store.dispatch("setNewJuice",!0)},closePages(){this.$store.dispatch("setNewJuice",!1),this.$store.dispatch("setJuicePage",!1),this.$store.dispatch("setDeleteMsg",!1)},loadProfileData(){this.$store.dispatch("getUser",this.loggedUser.name),this.$store.dispatch("getFollowers",this.loggedUser.name),this.$store.dispatch("getJuicesByUserName",this.loggedUser.name),this.$store.dispatch("getLoggedUser")}},computed:{...(0,b.Se)(["loggedUser","newJuice"])}},U=t(89);const S=(0,U.Z)(y,[["render",v]]);var E=S,J={name:"App",components:{NavBar:E}};const D=(0,U.Z)(J,[["render",a]]);var $=D,P=(t(7658),t(6943)),C=t(2483);const j={class:"page"};function M(e,s,t,o,r,n){const a=(0,i.up)("HomeTabs"),l=(0,i.up)("JuicesList"),c=(0,i.up)("NewJuice"),u=(0,i.up)("JuiceComponent"),d=(0,i.up)("DeleteMsg");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",j,[(0,i._)("button",{class:"refresh-btn orange-btn",href:"#",onClick:s[0]||(s[0]=(...e)=>n.forceRerender&&n.forceRerender(...e))},"↺"),(0,i.Wm)(a),((0,i.wg)(),(0,i.j4)(l,{key:r.componentKey}))]),e.newJuice?((0,i.wg)(),(0,i.j4)(c,{key:0})):(0,i.kq)("",!0),e.juicePage?((0,i.wg)(),(0,i.j4)(u,{key:1})):(0,i.kq)("",!0),e.deleteMsg?((0,i.wg)(),(0,i.j4)(d,{key:2})):(0,i.kq)("",!0)],64)}var I=t(7139);const N={class:"overlay"},T={class:"juice-box form-container"},L={class:"juice"},x={class:"juice-info"},O={class:"juice-meta form"},R=(0,i._)("br",null,null,-1),q=(0,i._)("br",null,null,-1),W=(0,i._)("input",{type:"submit",class:"bttn"},null,-1);function Z(e,s,t,o,n,a){return(0,i.wg)(),(0,i.iD)("div",N,[(0,i._)("div",T,[(0,i._)("button",{class:"boton-cerrar",onClick:s[0]||(s[0]=(...e)=>a.closePage&&a.closePage(...e))},"✖"),(0,i._)("div",L,[(0,i._)("div",x,[(0,i._)("h3",null,"@"+(0,I.zw)(e.loggedUser.name),1),(0,i._)("p",null,(0,I.zw)(a.calculateDate()),1),(0,i._)("div",O,[(0,i._)("form",{class:"form",onSubmit:s[2]||(s[2]=(0,r.iM)(((...e)=>a.postJuice&&a.postJuice(...e)),["prevent"]))},[(0,i.wy)((0,i._)("input",{type:"text",style:{"text-align":"left"},"onUpdate:modelValue":s[1]||(s[1]=e=>n.text=e),required:""},null,512),[[r.nr,n.text]]),R,q,W],32)])])])])])}var F={name:"NewJuice",data(){return{text:""}},methods:{calculateDate(){let e=Date.now(),s=new Date(e);return`${("0"+s.getDate()).slice(-2)}/${("0"+(s.getMonth()+1)).slice(-2)}/${s.getFullYear()} ${("0"+s.getHours()).slice(-2)}:${("0"+s.getMinutes()).slice(-2)}`},postJuice(){this.$store.dispatch("setJuice",{userName:this.loggedUser.name,text:this.text,date:this.calculateDate(),likes:[]}),this.$store.dispatch("postJuice")},closePage(){this.$store.dispatch("setNewJuice",!1)}},computed:{...(0,b.Se)(["loggedUser","error"])}};const z=(0,U.Z)(F,[["render",Z]]);var B=z;const A={class:"container"},V={key:0,class:"juices-list div-center"},G=["onClick"],H={class:"juice"},K={class:"juice-info"},Y={class:"juice-buttons"},Q={class:"juice-meta"},X=["onClick"],ee={key:0,class:"like-txt"},se=(0,i._)("span",{style:{color:"red"}},"❤",-1),te={key:1},oe={key:1},re={class:"juice-settings"},ie=["onClick"],ne=(0,i._)("span",null,"🗑",-1),ae=[ne];function le(e,s,t,o,n,a){const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",A,[e.juices.length>0?((0,i.wg)(),(0,i.iD)("div",V,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.juices,((t,o)=>((0,i.wg)(),(0,i.iD)("button",{id:"juice-btn",class:"juice-box2 juice-button",key:o,onClick:e=>a.openJuicePage(t,o)},[(0,i._)("div",H,[(0,i._)("div",K,[(0,i.Wm)(l,{class:"navigation-link",to:"/profile/"+t.userName},{default:(0,i.w5)((()=>[(0,i._)("h3",{class:"user-name",onClick:s[0]||(s[0]=(0,r.iM)((()=>{}),["stop"]))},"@"+(0,I.zw)(t.userName),1)])),_:2},1032,["to"]),(0,i._)("p",null,(0,I.zw)(t.date),1),(0,i._)("p",null,(0,I.zw)(t.text),1),(0,i._)("div",Y,[(0,i._)("div",Q,[(0,i.Uk)((0,I.zw)(a.calculateLikes(t.likes,o))+" ",1),e.loggedUser?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"like-btn bttn",onClick:(0,r.iM)((e=>a.likeJuice(t,o)),["stop"])},[n.liked[o]?((0,i.wg)(),(0,i.iD)("span",ee,[se,(0,i.Uk)(" "+(0,I.zw)(n.likes[o].length),1)])):((0,i.wg)(),(0,i.iD)("span",te,"♡ "+(0,I.zw)(n.likes[o].length),1))],8,X)):((0,i.wg)(),(0,i.iD)("p",oe,"♡ "+(0,I.zw)(n.likes[o].length),1))]),(0,i._)("div",re,[e.loggedUser&&e.loggedUser.name==t.userName?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"delete-btn bttn",onClick:(0,r.iM)((e=>a.openDeleteMsg(t)),["stop"])},ae,8,ie)):(0,i.kq)("",!0)])])])])],8,G)))),128))])):(0,i.kq)("",!0)])}var ce={name:"JuicesList",data(){return{likes:[],liked:[]}},methods:{calculateLikes(e,s){this.likes[s]=e,this.loggedUser&&-1===e.indexOf(this.loggedUser.name)?this.liked[s]=!1:this.liked[s]=!0},likeJuice(e,s){const t=this.likes[s].indexOf(this.loggedUser.name);t>-1?(this.liked[s]=!1,this.likes[s].splice(t,1)):(this.liked[s]=!0,this.likes[s].push(this.loggedUser.name)),e.likes=this.likes[s],this.$store.dispatch("setJuice",e),this.$store.dispatch("likeJuice",this.likes[s])},openJuicePage(e,s){e.likes=this.likes[s],this.$store.dispatch("setJuice",e),this.$store.dispatch("setJuicePage",!0)},openDeleteMsg(e){this.$store.dispatch("setJuice",e),this.$store.dispatch("setDeleteMsg",!0)}},computed:{...(0,b.Se)(["juices","loggedUser"])},created(){this.liked=new Array(this.$store.getters.juices.length).fill(!1),this.likes=new Array(this.$store.getters.juices.length).fill([])}};const ue=(0,U.Z)(ce,[["render",le]]);var de=ue;const pe={class:"overlay"},ge={class:"juice-box form-container"},me={class:"juice"},he={class:"juice-info"},we={class:"user-name"},_e={class:"juice-buttons"},fe={class:"juice-meta"},ke={key:0,class:"like-txt"},ve=(0,i._)("span",{style:{color:"red"}},"❤",-1),be={key:1},ye={key:1},Ue={class:"juice-settings"},Se=(0,i._)("span",null,"🗑",-1),Ee=[Se];function Je(e,s,t,o,r,n){const a=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",pe,[(0,i._)("div",ge,[(0,i._)("button",{class:"boton-cerrar",onClick:s[0]||(s[0]=(...e)=>n.closePage&&n.closePage(...e))},"✖"),(0,i._)("div",me,[(0,i._)("div",he,[(0,i.Wm)(a,{class:"navigation-link",to:"/profile/"+e.userName},{default:(0,i.w5)((()=>[(0,i._)("h3",we,"@"+(0,I.zw)(e.userName),1)])),_:1},8,["to"]),(0,i._)("p",null,(0,I.zw)(e.date),1),(0,i._)("p",null,(0,I.zw)(e.text),1),(0,i._)("div",_e,[(0,i._)("div",fe,[e.loggedUser?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"like-btn bttn",onClick:s[1]||(s[1]=(...e)=>n.likeJuice&&n.likeJuice(...e))},[r.liked?((0,i.wg)(),(0,i.iD)("span",ke,[ve,(0,i.Uk)(" "+(0,I.zw)(r.likes_count),1)])):((0,i.wg)(),(0,i.iD)("span",be,"♡ "+(0,I.zw)(r.likes_count),1))])):((0,i.wg)(),(0,i.iD)("p",ye,"♡ "+(0,I.zw)(r.likes_count),1))]),(0,i._)("div",Ue,[e.loggedUser&&e.loggedUser.name==e.userName?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"delete-btn bttn",onClick:s[2]||(s[2]=(...e)=>n.openDeleteMsg&&n.openDeleteMsg(...e))},Ee)):(0,i.kq)("",!0)])])])])])])])}var De=t(4870),$e={name:"JuiceComponent",data(){return{likes_count:0,liked:!1}},created(){let e=(0,De.IU)(this.likes);this.likes_count=e.length,this.loggedUser&&-1!==e.indexOf(this.loggedUser.name)?this.liked=!0:this.liked=!1},computed:{...(0,b.Se)(["loggedUser","error","userName","date","text","likes","juice_id","deleteMsg"])},methods:{likeJuice(){let e=this.proxyToArray(this.likes);const s=e.indexOf(this.loggedUser.name);s>-1?(e.splice(s,1),this.liked=!1):(e.push(this.loggedUser.name),this.liked=!0),this.$store.dispatch("likeJuice",e),this.$store.dispatch("setLikes",e),this.likes_count=e.length},proxyToArray(e){return(0,De.IU)(e)},openDeleteMsg(){this.$store.dispatch("setDeleteMsg",!0)},closePage(){this.$store.dispatch("setJuicePage",!1)}}};const Pe=(0,U.Z)($e,[["render",Je]]);var Ce=Pe;const je={class:"overlay2"},Me={class:"juice-box msg-container"},Ie={class:"juice"},Ne={class:"juice-info"},Te=(0,i._)("p",null,"¿Está seguro de que quiere eliminar este juice?",-1),Le={class:"juice-meta"},xe=(0,i._)("span",null,"Si",-1),Oe=[xe],Re=(0,i._)("span",null,"No",-1),qe=[Re];function We(e,s,t,o,r,n){return(0,i.wg)(),(0,i.iD)("div",je,[(0,i._)("div",Me,[(0,i._)("button",{class:"boton-cerrar",onClick:s[0]||(s[0]=e=>n.deleteMsg(!1))},"✖"),(0,i._)("div",Ie,[(0,i._)("div",Ne,[Te,(0,i._)("div",Le,[(0,i._)("button",{class:"bttn",onClick:s[1]||(s[1]=(...e)=>n.deleteJuice&&n.deleteJuice(...e))},Oe),(0,i._)("button",{class:"bttn",onClick:s[2]||(s[2]=e=>n.deleteMsg(!1))},qe)])])])])])}var Ze={name:"DeleteMsg",methods:{deleteMsg(e){this.$store.dispatch("setDeleteMsg",e)},deleteJuice(){this.$store.dispatch("deleteJuice"),this.$store.dispatch("setDeleteMsg",!1),this.$store.dispatch("setJuicePage",!1)}}};const Fe=(0,U.Z)(Ze,[["render",We]]);var ze=Fe;const Be={class:"home-tab"},Ae={key:0,class:"tab"},Ve=(0,i._)("h4",null,"Inicio",-1),Ge=[Ve],He=(0,i._)("h4",null,"Siguiendo",-1),Ke=[He],Ye={key:1,class:"tab"},Qe=(0,i._)("h4",null,"Inicio",-1),Xe=[Qe],es=(0,i._)("h4",null,"Siguiendo",-1),ss=[es],ts={key:2},os=(0,i._)("button",{class:"tab-btn",disabled:""},[(0,i._)("h4",{class:"disabled-tab-name"},"Inicio")],-1),rs=[os];function is(e,s,t,o,r,n){return(0,i.wg)(),(0,i.iD)("div",Be,[r.homeTab&&e.loggedUser?((0,i.wg)(),(0,i.iD)("div",Ae,[(0,i._)("button",{class:"tab-btn",onClick:s[0]||(s[0]=(...e)=>n.showAllJuices&&n.showAllJuices(...e))},Ge),(0,i._)("button",{class:"disabled-tab-btn",onClick:s[1]||(s[1]=(...e)=>n.showFollowingJuices&&n.showFollowingJuices(...e))},Ke)])):(0,i.kq)("",!0),!r.homeTab&&e.loggedUser?((0,i.wg)(),(0,i.iD)("div",Ye,[(0,i._)("button",{class:"disabled-tab-btn",onClick:s[2]||(s[2]=(...e)=>n.showAllJuices&&n.showAllJuices(...e))},Xe),(0,i._)("button",{class:"tab-btn",onClick:s[3]||(s[3]=(...e)=>n.showFollowingJuices&&n.showFollowingJuices(...e))},ss)])):(0,i.kq)("",!0),e.loggedUser?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",ts,rs))])}var ns={name:"HomeTabs",data(){return{homeTab:!0}},computed:{...(0,b.Se)(["loggedUser"])},methods:{showAllJuices(){this.homeTab=!0,this.$store.dispatch("getJuices")},showFollowingJuices(){this.homeTab=!1,this.$store.dispatch("getFollowingJuices")}}};const as=(0,U.Z)(ns,[["render",is]]);var ls=as,cs={name:"HomeView",data(){return{componentKey:0,homeTab:!0}},components:{HomeTabs:ls,NewJuice:B,JuicesList:de,JuiceComponent:Ce,DeleteMsg:ze},computed:{...(0,b.Se)(["newJuice","juicePage","deleteMsg"])},methods:{forceRerender(){this.componentKey+=1}},created(){this.$store.dispatch("getLoggedUser"),this.$store.dispatch("getJuices")}};const us=(0,U.Z)(cs,[["render",M]]);var ds=us;function ps(e,s,t,o,r,n){const a=(0,i.up)("SignIn");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(a)])}var gs=t.p+"img/logoblanco.1672c768.png";const ms={class:"auth"},hs={class:"header"},ws=(0,i._)("div",null,[(0,i._)("img",{height:"185",src:gs,alt:"Logo de Juicer"})],-1),_s={class:"body"},fs={class:"body"},ks=(0,i._)("h3",{class:"title"},"Iniciar sesión",-1),vs={class:"form-group"},bs={class:"checkboxes"},ys=(0,i._)("span",null," Mostrar contraseña",-1),Us={class:"actions"},Ss=(0,i._)("button",{type:"submit",class:"btn btn-primary btn-lg btn-block"}," Acceder ",-1),Es={class:"mt-2"};function Js(e,s,t,o,n,a){const l=(0,i.up)("router-link"),c=(0,i.up)("ErrorMsg");return(0,i.wg)(),(0,i.iD)("div",ms,[(0,i._)("div",hs,[(0,i.Wm)(l,{to:"/"},{default:(0,i.w5)((()=>[ws])),_:1})]),(0,i._)("div",_s,[(0,i._)("form",{class:"form",autocomplete:"off",onSubmit:s[3]||(s[3]=(0,r.iM)(((...e)=>a.signIn&&a.signIn(...e)),["prevent"]))},[(0,i._)("div",fs,[e.error?((0,i.wg)(),(0,i.j4)(c,{key:0})):(0,i.kq)("",!0),ks,(0,i._)("div",null,[(0,i._)("div",vs,[(0,i.wy)((0,i._)("input",{type:"email","onUpdate:modelValue":s[0]||(s[0]=e=>n.user.email=e),class:"form-control",placeholder:"Correo electrónico",required:""},null,512),[[r.nr,n.user.email]]),(0,i.wy)((0,i._)("input",{id:"password",type:"password","onUpdate:modelValue":s[1]||(s[1]=e=>n.user.password=e),class:"form-control",placeholder:"Contraseña",required:""},null,512),[[r.nr,n.user.password]]),(0,i._)("div",bs,[(0,i._)("label",null,[(0,i._)("input",{type:"checkbox",onClick:s[2]||(s[2]=e=>a.changePasswordVisibility())}),ys])])])])]),(0,i._)("div",Us,[Ss,(0,i._)("div",Es,[(0,i._)("p",null,[(0,i.Uk)(" ¿Eres nuevo? "),(0,i.Wm)(l,{to:"signup"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Registrate ")])),_:1})]),(0,i._)("p",null,[(0,i.Wm)(l,{to:"forgot"},{default:(0,i.w5)((()=>[(0,i.Uk)(" ¿Olvidaste tu contraseña? ")])),_:1})])])])],32)])])}const Ds={class:"alert alert-danger",role:"alert"};function $s(e,s,t,o,r,n){return(0,i.wg)(),(0,i.iD)("div",Ds,(0,I.zw)(e.error),1)}var Ps={name:"ErrorMsg",computed:{...(0,b.Se)(["error"])}};const Cs=(0,U.Z)(Ps,[["render",$s]]);var js=Cs,Ms={name:"SingIn",components:{ErrorMsg:js},data(){return{user:{email:"",password:""}}},created(){this.$store.dispatch("setError",null)},methods:{signIn(){this.$store.dispatch("signIn",this.user),this.$store.dispatch("postSignIn")},changePasswordVisibility(){"password"===document.getElementById("password").type?document.getElementById("password").type="text":document.getElementById("password").type="password"}},computed:{...(0,b.Se)(["error"])}};const Is=(0,U.Z)(Ms,[["render",Js]]);var Ns=Is,Ts={name:"SignInView",components:{SignIn:Ns}};const Ls=(0,U.Z)(Ts,[["render",ps]]);var xs=Ls;function Os(e,s,t,o,r,n){const a=(0,i.up)("SignUp");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(a)])}const Rs={class:"auth"},qs={class:"header"},Ws=(0,i._)("div",null,[(0,i._)("img",{height:"185",src:gs,alt:"Logo de Juicer"})],-1),Zs={class:"body"},Fs={class:"body"},zs=(0,i._)("h3",{class:"title"},"¡Bienvenido a Juicer!",-1),Bs={class:"form-group"},As={class:"checkboxes"},Vs=(0,i._)("span",null," Mostrar contraseñas",-1),Gs={class:"actions"},Hs=(0,i._)("button",{type:"sumbit",class:"btn btn-primary btn-lg btn-block"}," Registrarse ",-1),Ks={class:"mt-2"};function Ys(e,s,t,o,n,a){const l=(0,i.up)("router-link"),c=(0,i.up)("ErrorMsg");return(0,i.wg)(),(0,i.iD)("div",Rs,[(0,i._)("div",qs,[(0,i.Wm)(l,{to:"/"},{default:(0,i.w5)((()=>[Ws])),_:1})]),(0,i._)("div",Zs,[(0,i._)("form",{class:"form",autocomplete:"off",onSubmit:s[5]||(s[5]=(0,r.iM)(((...e)=>a.signUp&&a.signUp(...e)),["prevent"]))},[(0,i._)("div",Fs,[e.error?((0,i.wg)(),(0,i.j4)(c,{key:0})):(0,i.kq)("",!0),zs,(0,i._)("div",null,[(0,i._)("div",Bs,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>n.user.name=e),class:"form-control",placeholder:"Nombre de usuario",required:""},null,512),[[r.nr,n.user.name]]),(0,i.wy)((0,i._)("input",{type:"email","onUpdate:modelValue":s[1]||(s[1]=e=>n.user.email=e),class:"form-control",placeholder:"Correo electrónico",required:""},null,512),[[r.nr,n.user.email]]),(0,i.wy)((0,i._)("input",{id:"password",type:"password","onUpdate:modelValue":s[2]||(s[2]=e=>n.user.password=e),class:"form-control",placeholder:"Contraseña",required:""},null,512),[[r.nr,n.user.password]]),(0,i.wy)((0,i._)("input",{id:"confirm_password",type:"password","onUpdate:modelValue":s[3]||(s[3]=e=>n.user.confirm_password=e),class:"form-control",placeholder:"Confirmar contraseña",required:""},null,512),[[r.nr,n.user.confirm_password]]),(0,i._)("div",As,[(0,i._)("label",null,[(0,i._)("input",{type:"checkbox",onClick:s[4]||(s[4]=e=>a.changePasswordVisibility())}),Vs])])])])]),(0,i._)("div",Gs,[Hs,(0,i._)("div",Ks,[(0,i._)("p",null,[(0,i.Uk)(" ¿Ya tienes cuenta? "),(0,i.Wm)(l,{to:"signin"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Iniciar sesión ")])),_:1})])])])],32)])])}var Qs={name:"SingUp",components:{ErrorMsg:js},data(){return{user:{name:"",email:"",password:"",confirm_password:""}}},created(){this.$store.dispatch("setError",null)},methods:{signUp(){this.user.confirm_password===this.user.password?(this.$store.dispatch("signUp",this.user),this.$store.dispatch("postSignUp")):this.$store.dispatch("setError","Contraseñas distintas")},changePasswordVisibility(){"password"===document.getElementById("password").type?(document.getElementById("password").type="text",document.getElementById("confirm_password").type="text"):(document.getElementById("password").type="password",document.getElementById("confirm_password").type="password")}},computed:{...(0,b.Se)(["error"])}};const Xs=(0,U.Z)(Qs,[["render",Ys]]);var et=Xs,st={name:"SignUpView",components:{SignUp:et}};const tt=(0,U.Z)(st,[["render",Os]]);var ot=tt;function rt(e,s,t,o,r,n){const a=(0,i.up)("ForgotPassword");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(a)])}const it={class:"auth"},nt={class:"header"},at=(0,i._)("div",null,[(0,i._)("img",{height:"185",src:gs,alt:"Logo de Juicer"})],-1),lt={class:"body"},ct={class:"body"},ut=(0,i._)("h3",{class:"title"},"¿Has olvidado tu cuenta?",-1),dt=(0,i._)("p",null," Introduce tu correo electrónico para cambiar tu contraseña. ",-1),pt={class:"form-group"},gt={class:"actions"},mt=(0,i._)("button",{type:"submit",class:"btn btn-primary btn-lg btn-block"}," Enviar ",-1),ht={class:"mt-2"},wt=(0,i._)("br",null,null,-1);function _t(e,s,t,o,n,a){const l=(0,i.up)("router-link"),c=(0,i.up)("ErrorMsg"),u=(0,i.up)("SuccessMsg");return(0,i.wg)(),(0,i.iD)("div",it,[(0,i._)("div",nt,[(0,i.Wm)(l,{to:"/"},{default:(0,i.w5)((()=>[at])),_:1})]),(0,i._)("div",lt,[(0,i._)("form",{class:"form",autocomplete:"off",onSubmit:s[1]||(s[1]=(0,r.iM)((e=>a.sendResetPasswordEmail()),["prevent"]))},[(0,i._)("div",ct,[e.error?((0,i.wg)(),(0,i.j4)(c,{key:0})):(0,i.kq)("",!0),e.success?((0,i.wg)(),(0,i.j4)(u,{key:1})):(0,i.kq)("",!0),ut,dt,(0,i._)("div",null,[(0,i._)("div",pt,[(0,i.wy)((0,i._)("input",{type:"email","onUpdate:modelValue":s[0]||(s[0]=e=>n.email=e),class:"form-control",placeholder:"Correo electrónico",required:""},null,512),[[r.nr,n.email]])])])]),(0,i._)("div",gt,[mt,(0,i._)("div",ht,[(0,i._)("p",null,[(0,i.Uk)(" ó "),wt,(0,i.Wm)(l,{to:"signin"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Inicia sesión ")])),_:1})])])])],32)])])}const ft={class:"alert alert-success",role:"alert"};function kt(e,s,t,o,r,n){return(0,i.wg)(),(0,i.iD)("div",ft,(0,I.zw)(e.success),1)}var vt={name:"SuccessMsg",computed:{...(0,b.Se)(["success"])}};const bt=(0,U.Z)(vt,[["render",kt]]);var yt=bt,Ut={name:"ForgotPassword",components:{ErrorMsg:js,SuccessMsg:yt},data(){return{email:""}},created(){this.$store.dispatch("setError",null)},methods:{sendResetPasswordEmail(){this.$store.dispatch("setEmail",this.email),this.$store.dispatch("sendResetPasswordEmail")}},computed:{...(0,b.Se)(["error","success"])}};const St=(0,U.Z)(Ut,[["render",_t]]);var Et=St,Jt={name:"ForgotView",components:{ForgotPassword:Et}};const Dt=(0,U.Z)(Jt,[["render",rt]]);var $t=Dt;function Pt(e,s,t,o,r,n){const a=(0,i.up)("ResetPassword");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(a)])}const Ct={class:"auth"},jt={class:"header"},Mt=(0,i._)("div",null,[(0,i._)("img",{height:"185",src:gs,alt:"Logo de Juicer"})],-1),It={class:"body"},Nt={class:"body"},Tt=(0,i._)("h3",{class:"title"},"Restablecer contraseña",-1),Lt=(0,i._)("p",null," Introduce tu nueva contraseña. ",-1),xt={class:"form-group"},Ot={class:"checkboxes"},Rt=(0,i._)("span",null," Mostrar contraseñas",-1),qt={class:"actions"},Wt=(0,i._)("button",{type:"submit",class:"btn btn-primary btn-lg btn-block"}," Enviar ",-1),Zt={class:"mt-2"},Ft=(0,i._)("br",null,null,-1);function zt(e,s,t,o,n,a){const l=(0,i.up)("router-link"),c=(0,i.up)("ErrorMsg");return(0,i.wg)(),(0,i.iD)("div",Ct,[(0,i._)("div",jt,[(0,i.Wm)(l,{to:"/"},{default:(0,i.w5)((()=>[Mt])),_:1})]),(0,i._)("div",It,[(0,i._)("form",{class:"form",autocomplete:"off",onSubmit:s[3]||(s[3]=(0,r.iM)((e=>a.resetPassword()),["prevent"]))},[(0,i._)("div",Nt,[e.error?((0,i.wg)(),(0,i.j4)(c,{key:0})):(0,i.kq)("",!0),Tt,Lt,(0,i._)("div",null,[(0,i._)("div",xt,[(0,i.wy)((0,i._)("input",{id:"password",type:"password","onUpdate:modelValue":s[0]||(s[0]=e=>n.user.password=e),class:"form-control",placeholder:"Contraseña",required:""},null,512),[[r.nr,n.user.password]]),(0,i.wy)((0,i._)("input",{id:"confirm_password",type:"password","onUpdate:modelValue":s[1]||(s[1]=e=>n.user.confirm_password=e),class:"form-control",placeholder:"Confirmar contraseña",required:""},null,512),[[r.nr,n.user.confirm_password]]),(0,i._)("div",Ot,[(0,i._)("label",null,[(0,i._)("input",{type:"checkbox",onClick:s[2]||(s[2]=e=>a.changePasswordVisibility())}),Rt])])])])]),(0,i._)("div",qt,[Wt,(0,i._)("div",Zt,[(0,i._)("p",null,[(0,i.Uk)(" ó "),Ft,(0,i.Wm)(l,{to:"signin"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Inicia sesión ")])),_:1})]),(0,i._)("p",null,[(0,i.Wm)(l,{to:"signin"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Regístrate ")])),_:1})])])])],32)])])}var Bt={name:"ResetPassword",components:{ErrorMsg:js},data(){return{user:{password:"",confirm_password:""}}},created(){this.$store.dispatch("setError",null)},methods:{resetPassword(){this.user.confirm_password===this.user.password?(this.$store.dispatch("setPassword",this.user.password),this.$store.dispatch("resetPassword",this.$route.params.token)):this.$store.dispatch("setError","Contraseñas distintas")},changePasswordVisibility(){"password"===document.getElementById("password").type?(document.getElementById("password").type="text",document.getElementById("confirm_password").type="text"):(document.getElementById("password").type="password",document.getElementById("confirm_password").type="password")}},computed:{...(0,b.Se)(["error"])}};const At=(0,U.Z)(Bt,[["render",zt]]);var Vt=At,Gt={name:"ResetView",components:{ResetPassword:Vt}};const Ht=(0,U.Z)(Gt,[["render",Pt]]);var Kt=Ht;const Yt={class:"page"},Qt={class:"profile-page"};function Xt(e,s,t,o,r,n){const a=(0,i.up)("ProfilePage"),l=(0,i.up)("JuicesList"),c=(0,i.up)("NewJuice"),u=(0,i.up)("JuiceComponent"),d=(0,i.up)("DeleteMsg");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Yt,[(0,i._)("button",{class:"refresh-btn orange-btn",href:"#",onClick:s[0]||(s[0]=(...e)=>n.forceRerender&&n.forceRerender(...e))},"↺"),(0,i._)("div",Qt,[(0,i.Wm)(a),((0,i.wg)(),(0,i.j4)(l,{key:r.componentKey}))])]),e.newJuice?((0,i.wg)(),(0,i.j4)(c,{key:0})):(0,i.kq)("",!0),e.juicePage?((0,i.wg)(),(0,i.j4)(u,{key:1})):(0,i.kq)("",!0),e.deleteMsg?((0,i.wg)(),(0,i.j4)(d,{key:2})):(0,i.kq)("",!0)],64)}const eo={class:"header"},so={key:0},to={key:1},oo=(0,i._)("button",{class:"follow-btn"},"Seguir",-1),ro={class:"stats"},io={class:"stat"},no=(0,i._)("p",null,"Seguidores",-1),ao={class:"stat"},lo=(0,i._)("p",null,"Siguiendo",-1),co={class:"stat"},uo=(0,i._)("p",null,"Juices",-1),po={key:0,class:"tab"},go=(0,i._)("h5",null,"Juices",-1),mo=[go],ho=(0,i._)("h5",null,"Me gusta",-1),wo=[ho],_o={key:1,class:"tab"},fo=(0,i._)("h5",null,"Juices",-1),ko=[fo],vo=(0,i._)("h5",null,"Me gusta",-1),bo=[vo];function yo(e,s,t,o,r,n){const a=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",eo,[(0,i._)("h1",null,"@"+(0,I.zw)(e.name),1),e.loggedUser?((0,i.wg)(),(0,i.iD)("div",so,[(0,i.Uk)((0,I.zw)(n.chekIfFollowed())+" ",1),e.loggedUser.name==e.name||r.followed?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:0,class:"follow-btn",onClick:s[0]||(s[0]=(...e)=>n.followUser&&n.followUser(...e))},"Seguir")),e.loggedUser.name!=e.name&&r.followed?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"unfollow-btn",onClick:s[1]||(s[1]=(...e)=>n.followUser&&n.followUser(...e))},"Siguiendo")):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("div",to,[(0,i.Wm)(a,{to:"/signin"},{default:(0,i.w5)((()=>[oo])),_:1})]))]),(0,i._)("div",ro,[(0,i._)("div",io,[(0,i._)("p",null,(0,I.zw)(e.followers),1),no]),(0,i._)("div",ao,[(0,i._)("p",null,(0,I.zw)(e.following.length),1),lo]),(0,i._)("div",co,[(0,i._)("p",null,(0,I.zw)(e.number_of_juices),1),uo])]),r.profileTab?((0,i.wg)(),(0,i.iD)("div",po,[(0,i._)("button",{class:"tab-btn",onClick:s[2]||(s[2]=(...e)=>n.showUserJuices&&n.showUserJuices(...e))},mo),(0,i._)("button",{class:"disabled-tab-btn",onClick:s[3]||(s[3]=(...e)=>n.showLikedJuices&&n.showLikedJuices(...e))},wo)])):((0,i.wg)(),(0,i.iD)("div",_o,[(0,i._)("button",{class:"disabled-tab-btn",onClick:s[4]||(s[4]=(...e)=>n.showUserJuices&&n.showUserJuices(...e))},ko),(0,i._)("button",{class:"tab-btn",onClick:s[5]||(s[5]=(...e)=>n.showLikedJuices&&n.showLikedJuices(...e))},bo)]))])}var Uo={name:"ProfilePage",data(){return{followed:null,profileTab:!0}},methods:{showUserJuices(){this.profileTab=!0,this.$store.dispatch("setLikedPage",!1),this.$store.dispatch("getJuicesByUserName",this.$route.params.userName)},showLikedJuices(){this.profileTab=!1,this.$store.dispatch("setLikedPage",!0),this.$store.dispatch("getJuicesLikedByUserName",this.$route.params.userName)},async followUser(){let e=this.loggedUser.following;const s=e.indexOf(this.$route.params.userName);s>-1?(e.splice(s,1),this.followed=!1):(e.push(this.$route.params.userName),this.followed=!0),await this.$store.dispatch("followUser",e),this.$store.dispatch("getFollowers",this.$route.params.userName)},chekIfFollowed(){if(this.loggedUser){const e=this.loggedUser.following.indexOf(this.$route.params.userName);this.followed=e>-1}}},computed:{...(0,b.Se)(["name","description","following","juices","likedPage","loggedUser","number_of_juices","followers"])}};const So=(0,U.Z)(Uo,[["render",yo]]);var Eo=So,Jo={name:"ProfileView",data(){return{componentKey:0}},components:{ProfilePage:Eo,JuicesList:de,JuiceComponent:Ce,DeleteMsg:ze,NewJuice:B},methods:{forceRerender(){this.componentKey+=1}},computed:{...(0,b.Se)(["newJuice","juicePage","deleteMsg"])},created(){this.$store.dispatch("getUser",this.$route.params.userName),this.$store.dispatch("getFollowers",this.$route.params.userName),this.$store.dispatch("getJuicesByUserName",this.$route.params.userName),this.$store.dispatch("getLoggedUser")}};const Do=(0,U.Z)(Jo,[["render",Xt]]);var $o=Do;const Po="history",Co=[{path:"/",name:"Home",component:ds},{path:"/signin",name:"SignIn",component:xs},{path:"/signup",name:"SignUp",component:ot},{path:"/forgot",name:"Forgot",component:$t},{path:"/reset/:token",name:"Reset",component:Kt},{path:"/profile/:userName",name:"Profile",component:$o}],jo=(0,C.p7)({history:(0,C.PO)("/"),routes:Co,mode:Po});var Mo=jo;const Io={state:()=>({loggedUser:null,error:null,success:null,name:"",email:"",password:"",id:"",following:[],followers:0}),mutations:{SET_USER(e,s){e.name=s.name,e.email=s.email,e.password=s.password,e.id=s._id,e.following=s.following},SET_LOGGED_USER(e,s){e.loggedUser=s},SET_ERROR(e,s){e.error=s},SET_SUCCESS(e,s){e.success=s},SET_NAME(e,s){e.name=s},SET_EMAIL(e,s){e.email=s},SET_PASSWORD(e,s){e.password=s},SET_FOLLOWERS(e,s){e.followers=s},SET_ID(e,s){e.id=s},SET_FOLLOWING(e,s){e.following=s},SIGN_IN(e,s){e.email=s.email,e.password=s.password},SIGN_UP(e,s){e.name=s.name,e.email=s.email,e.password=s.password},SET_DEFAULT_USER(e){e.loggedUser=null,e.error=null,e.success=null,e.name="",e.email="",e.password="",e.id="",e.following=[],e.followers=0}},actions:{async postSignUp({getters:e,dispatch:s}){try{await P.Z.post("signup",{name:e.name,email:e.email,password:e.password,following:e.following}),Mo.push("/signin")}catch(t){s("setError",t.response.data.error)}},async postSignIn({getters:e,dispatch:s}){try{const t=await P.Z.post("signin",{email:e.email,password:e.password});localStorage.setItem("token",t.data.token),s("getLoggedUser"),Mo.push("/")}catch(t){s("setError",t.response.data.error)}},async getLoggedUser({dispatch:e}){try{const s=await P.Z.get("user",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});0!==s.data.length&&e("setLoggedUser",s.data)}catch(s){e("setError",s.response.data.error)}},async sendResetPasswordEmail({getters:e,dispatch:s}){try{const t=await P.Z.post("password-reset",{email:e.email});s("setError",null),s("setSuccess",t.data)}catch(t){s("setError",t.response.data.error)}},async resetPassword({getters:e,dispatch:s},t){try{console.log(e.password),await P.Z.patch("password-reset",{password:e.password},{headers:{Authorization:"Bearer "+t}}),Mo.push("/signin")}catch(o){s("setError",o.response.data.error)}},async getUser({dispatch:e},s){try{const t=await P.Z.get(`users?name=${s}`);e("setUser",t.data[0])}catch(t){e("setError",t.message)}},async followUser({dispatch:e,getters:s},t){try{await P.Z.patch(`users?id=${s.loggedUser._id}`,{following:t},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})}catch(o){e("setError",o.response.data.error)}},async getFollowers({dispatch:e},s){try{const t=await P.Z.get(`followers?userName=${s}`);e("setFollowers",t.data.followers)}catch(t){e("setError",t.response.data.error)}},signUp({commit:e},s){e("SIGN_UP",s)},signIn({commit:e},s){e("SIGN_IN",s)},setUser({commit:e},s){e("SET_USER",s)},setLoggedUser({commit:e},s){e("SET_LOGGED_USER",s)},setError({commit:e},s){e("SET_ERROR",s)},setSuccess({commit:e},s){e("SET_SUCCESS",s)},setName({commit:e},s){e("SET_NAME",s)},setEmail({commit:e},s){e("SET_EMAIL",s)},setPassword({commit:e},s){e("SET_PASSWORD",s)},setFollowers({commit:e},s){e("SET_FOLLOWERS",s)},setFollowing({commit:e},s){e("SET_FOLLOWING",s)},setId({commit:e},s){e("SET_ID",s)},setDefaultUser({commit:e}){e("SET_DEFAULT_USER")}},getters:{loggedUser:e=>e.loggedUser,error:e=>e.error,success:e=>e.success,name:e=>e.name,email:e=>e.email,password:e=>e.password,id:e=>e.id,following:e=>e.following,followers:e=>e.followers}};var No=(0,b.MT)({state:{},getters:{},mutations:{},actions:{},modules:{user:Io,juice:o.juicesModel}});P.Z.defaults.baseURL="http://10.6.130.29/api/";const To=(0,r.ri)($);To.use(Mo),To.use(No),To.mount("#app")}},s={};function t(o){var r=s[o];if(void 0!==r)return r.exports;var i=s[o]={exports:{}};return e[o](i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(s,o,r,i){if(!o){var n=1/0;for(u=0;u<e.length;u++){o=e[u][0],r=e[u][1],i=e[u][2];for(var a=!0,l=0;l<o.length;l++)(!1&i||n>=i)&&Object.keys(t.O).every((function(e){return t.O[e](o[l])}))?o.splice(l--,1):(a=!1,i<n&&(n=i));if(a){e.splice(u--,1);var c=r();void 0!==c&&(s=c)}}return s}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,r,i]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var o in s)t.o(s,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:s[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={143:0};t.O.j=function(s){return 0===e[s]};var s=function(s,o){var r,i,n=o[0],a=o[1],l=o[2],c=0;if(n.some((function(s){return 0!==e[s]}))){for(r in a)t.o(a,r)&&(t.m[r]=a[r]);if(l)var u=l(t)}for(s&&s(o);c<n.length;c++)i=n[c],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(u)},o=self["webpackChunkjuicer"]=self["webpackChunkjuicer"]||[];o.forEach(s.bind(null,0)),o.push=s.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(6951)}));o=t.O(o)})();
//# sourceMappingURL=app.85ec28fa.js.map