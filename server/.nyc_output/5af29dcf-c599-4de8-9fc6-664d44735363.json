{"/home/usuario/juicer/server/src/app.ts":{"path":"/home/usuario/juicer/server/src/app.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":21}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":25}},"4":{"start":{"line":6,"column":21},"end":{"line":6,"column":52}},"5":{"start":{"line":7,"column":18},"end":{"line":7,"column":46}},"6":{"start":{"line":8,"column":13},"end":{"line":8,"column":28}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":24}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":59}},"9":{"start":{"line":18,"column":0},"end":{"line":18,"column":32}},"10":{"start":{"line":22,"column":0},"end":{"line":22,"column":41}},"11":{"start":{"line":23,"column":0},"end":{"line":23,"column":41}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/usuario/juicer/server/src/app.ts","sources":["/home/usuario/juicer/server/src/app.ts"],"names":[],"mappings":";;;AAAA,mCAAmC;AACnC,yBAAuB;AACvB,qDAAgD;AAChD,+CAAgD;AAChD,MAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAE7B;;;GAGG;AACU,QAAA,GAAG,GAAG,OAAO,EAAE,CAAC;AAC7B,WAAG,CAAC,GAAG,CAAC,IAAI,CAAC,EAAC,MAAM,EAAE,uBAAuB,EAAC,CAAC,CAAC,CAAC;AAEjD;;GAEG;AACH,WAAG,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC;AAExB;;GAEG;AACH,WAAG,CAAC,GAAG,CAAC,uBAAU,CAAC,CAAC;AACpB,WAAG,CAAC,GAAG,CAAC,uBAAa,CAAC,CAAC","sourcesContent":["import * as express from 'express';\nimport './db/mongoose';\nimport {userRouter} from './routers/userRouter';\nimport {defaultRouter} from './routers/default';\nconst cors = require('cors');\n\n/**\n * Creamos el servidor\n * 'app' variable de tipo Express\n */\nexport const app = express();\napp.use(cors({origin: 'http://localhost:8080'}));\n\n/**\n * Parsea el cuerpo de la petición\n */\napp.use(express.json());\n\n/**\n * Llamadas a las rutas\n */\napp.use(userRouter);\napp.use(defaultRouter);"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"31394ca8612de7616249362724a9dc740cf23817","contentHash":"68435f2b292d91b587d548cdc5ddd092f0bb7a831e4b76a0d1c4f00fac0875cb"},"/home/usuario/juicer/server/src/db/mongoose.ts":{"path":"/home/usuario/juicer/server/src/db/mongoose.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":19},"end":{"line":3,"column":38}},"2":{"start":{"line":5,"column":19},"end":{"line":5,"column":40}},"3":{"start":{"line":8,"column":0},"end":{"line":8,"column":34}},"4":{"start":{"line":9,"column":0},"end":{"line":18,"column":3}},"5":{"start":{"line":15,"column":4},"end":{"line":15,"column":60}},"6":{"start":{"line":17,"column":4},"end":{"line":17,"column":56}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":14,"column":8},"end":{"line":14,"column":9}},"loc":{"start":{"line":14,"column":14},"end":{"line":16,"column":1}},"line":14},"1":{"name":"(anonymous_1)","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":10}},"loc":{"start":{"line":16,"column":15},"end":{"line":18,"column":1}},"line":16}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0},"f":{"0":0,"1":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/usuario/juicer/server/src/db/mongoose.ts","sources":["/home/usuario/juicer/server/src/db/mongoose.ts"],"names":[],"mappings":";;AAAA,uCAAiC;AACjC,oBAAoB;AACpB,yCAAqC;AACrC,oCAAoC;AAEpC,gIAAgI;AAChI,OAAO,CAAC,GAAG,CAAC,oBAAS,CAAC,CAAC;AACvB,IAAA,kBAAO,EAAC,oBAAS,EAAE;IACjB,eAAe,EAAE,IAAI;IACrB,kBAAkB,EAAE,IAAI;IACxB,cAAc,EAAE,IAAI;IACpB,gBAAgB,EAAE,KAAK;CACxB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;IACX,OAAO,CAAC,GAAG,CAAC,0CAA0C,CAAC,CAAC;AAC1D,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE;IACZ,OAAO,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC;AACtD,CAAC,CAAC,CAAC","sourcesContent":["import {connect} from 'mongoose';\n//require 'dbconfig'\nimport {remoteUrl} from './dbconfig';\n//// <reference path=\"dbconfig.ts\"/>\n\n//const mongodb_url = 'mongodb://172.16.119.20:27017/juicer';//process.env.MONGODB_URL || 'mongodb://127.0.0.1:27017/music-api';\nconsole.log(remoteUrl);\nconnect(remoteUrl, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n  useCreateIndex: true,\n  useFindAndModify: false,\n}).then(() => {\n  console.log('Connection to MongoDB server established');\n}).catch(() => {\n  console.log('Unnable to connect to MongoDB server');\n});\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2b951a27f84e16a09b9da867f253ec4cac1e1d04","contentHash":"38a9b5c16c77af85a845fd4c1c10bac20ef5624c7279f4aa1be6edc8fcdce204"},"/home/usuario/juicer/server/src/db/dbconfig.ts":{"path":"/home/usuario/juicer/server/src/db/dbconfig.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":48}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":46}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":46}},"4":{"start":{"line":6,"column":25},"end":{"line":6,"column":54}},"5":{"start":{"line":7,"column":21},"end":{"line":7,"column":46}},"6":{"start":{"line":8,"column":21},"end":{"line":8,"column":46}},"7":{"start":{"line":9,"column":31},"end":{"line":9,"column":70}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":114}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":142}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/usuario/juicer/server/src/db/dbconfig.ts","sources":["/home/usuario/juicer/server/src/db/dbconfig.ts"],"names":[],"mappings":";;;AAAA,MAAM,YAAY,GAAW,OAAO,CAAC,GAAG,CAAC,aAAuB,CAAC;AACjE,MAAM,YAAY,GAAW,OAAO,CAAC,GAAG,CAAC,aAAuB,CAAC;AACjE,MAAM,gBAAgB,GAAW,OAAO,CAAC,GAAG,CAAC,iBAA2B,CAAC;AACzE,MAAM,YAAY,GAAW,OAAO,CAAC,GAAG,CAAC,aAAuB,CAAC;AACjE,MAAM,YAAY,GAAW,OAAO,CAAC,GAAG,CAAC,aAAuB,CAAC;AACjE,MAAM,sBAAsB,GAAW,OAAO,CAAC,GAAG,CAAC,2BAAqC,CAAC;AAE5E,QAAA,SAAS,GAAW,6FAA6F,CAAC;AAClH,QAAA,UAAU,GAAW,aAAa,YAAY,IAAI,gBAAgB,IAAI,YAAY,GAAG,YAAY,IAAI,YAAY,IAAI,sBAAsB,EAAE,CAAC","sourcesContent":["const databaseUser: string = process.env.DATABASE_USER as string;\nconst databaseName: string = process.env.DATABASE_NAME as string;\nconst databasePassword: string = process.env.DATABASE_PASSWORD as string;\nconst databaseHost: string = process.env.DATABASE_HOST as string;\nconst databasePort: string = process.env.DATABASE_PORT as string;\nconst databaseConnectionOpts: string = process.env.DATABASE_CONNECTION_OPTIONS as string;\n\nexport const remoteUrl: string = 'mongodb+srv://juicer:Sytw09@cluster0.y0awkyy.mongodb.net/juicer?retryWrites=true&w=majority';\nexport const remoteUrl2: string = `mongodb://${databaseUser}:${databasePassword}@${databaseHost}${databasePort}/${databaseName}?${databaseConnectionOpts}`;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3419fbec2d4eca9a14791f8cacbfc37be511f67d","contentHash":"6b3300c495f02f65b3d326a641bd0422315da11a77c1961dcc4c13f6a1acc991"},"/home/usuario/juicer/server/src/routers/userRouter.ts":{"path":"/home/usuario/juicer/server/src/routers/userRouter.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"3":{"start":{"line":5,"column":15},"end":{"line":5,"column":40}},"4":{"start":{"line":6,"column":24},"end":{"line":6,"column":51}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":38}},"6":{"start":{"line":9,"column":0},"end":{"line":12,"column":3}},"7":{"start":{"line":10,"column":17},"end":{"line":10,"column":42}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":56}},"9":{"start":{"line":13,"column":0},"end":{"line":15,"column":3}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":68}},"11":{"start":{"line":16,"column":0},"end":{"line":18,"column":3}},"12":{"start":{"line":17,"column":4},"end":{"line":17,"column":75}},"13":{"start":{"line":20,"column":0},"end":{"line":22,"column":3}},"14":{"start":{"line":21,"column":4},"end":{"line":21,"column":52}},"15":{"start":{"line":23,"column":0},"end":{"line":26,"column":3}},"16":{"start":{"line":24,"column":19},"end":{"line":24,"column":76}},"17":{"start":{"line":25,"column":4},"end":{"line":25,"column":64}},"18":{"start":{"line":32,"column":0},"end":{"line":44,"column":3}},"19":{"start":{"line":33,"column":27},"end":{"line":33,"column":113}},"20":{"start":{"line":34,"column":26},"end":{"line":34,"column":47}},"21":{"start":{"line":35,"column":26},"end":{"line":35,"column":90}},"22":{"start":{"line":35,"column":58},"end":{"line":35,"column":89}},"23":{"start":{"line":36,"column":4},"end":{"line":43,"column":5}},"24":{"start":{"line":37,"column":8},"end":{"line":39,"column":11}},"25":{"start":{"line":42,"column":8},"end":{"line":42,"column":67}},"26":{"start":{"line":61,"column":0},"end":{"line":68,"column":3}},"27":{"start":{"line":62,"column":4},"end":{"line":66,"column":5}},"28":{"start":{"line":63,"column":8},"end":{"line":65,"column":11}},"29":{"start":{"line":67,"column":4},"end":{"line":67,"column":64}},"30":{"start":{"line":69,"column":0},"end":{"line":71,"column":3}},"31":{"start":{"line":70,"column":4},"end":{"line":70,"column":66}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":39},"end":{"line":9,"column":40}},"loc":{"start":{"line":9,"column":53},"end":{"line":12,"column":1}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":39},"end":{"line":13,"column":40}},"loc":{"start":{"line":13,"column":53},"end":{"line":15,"column":1}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":16,"column":47},"end":{"line":16,"column":48}},"loc":{"start":{"line":16,"column":61},"end":{"line":18,"column":1}},"line":16},"3":{"name":"(anonymous_3)","decl":{"start":{"line":20,"column":36},"end":{"line":20,"column":37}},"loc":{"start":{"line":20,"column":50},"end":{"line":22,"column":1}},"line":20},"4":{"name":"(anonymous_4)","decl":{"start":{"line":23,"column":37},"end":{"line":23,"column":38}},"loc":{"start":{"line":23,"column":51},"end":{"line":26,"column":1}},"line":23},"5":{"name":"(anonymous_5)","decl":{"start":{"line":32,"column":39},"end":{"line":32,"column":40}},"loc":{"start":{"line":32,"column":53},"end":{"line":44,"column":1}},"line":32},"6":{"name":"(anonymous_6)","decl":{"start":{"line":35,"column":46},"end":{"line":35,"column":47}},"loc":{"start":{"line":35,"column":58},"end":{"line":35,"column":89}},"line":35},"7":{"name":"(anonymous_7)","decl":{"start":{"line":61,"column":40},"end":{"line":61,"column":41}},"loc":{"start":{"line":61,"column":54},"end":{"line":68,"column":1}},"line":61},"8":{"name":"(anonymous_8)","decl":{"start":{"line":69,"column":44},"end":{"line":69,"column":45}},"loc":{"start":{"line":69,"column":64},"end":{"line":71,"column":1}},"line":69}},"branchMap":{"0":{"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":76}},"type":"cond-expr","locations":[{"start":{"line":24,"column":36},"end":{"line":24,"column":71}},{"start":{"line":24,"column":74},"end":{"line":24,"column":76}}],"line":24},"1":{"loc":{"start":{"line":36,"column":4},"end":{"line":43,"column":5}},"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":43,"column":5}},{"start":{"line":36,"column":4},"end":{"line":43,"column":5}}],"line":36},"2":{"loc":{"start":{"line":62,"column":4},"end":{"line":66,"column":5}},"type":"if","locations":[{"start":{"line":62,"column":4},"end":{"line":66,"column":5}},{"start":{"line":62,"column":4},"end":{"line":66,"column":5}}],"line":62}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":1,"10":0,"11":1,"12":0,"13":1,"14":0,"15":1,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":1,"31":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0]},"inputSourceMap":{"version":3,"file":"/home/usuario/juicer/server/src/routers/userRouter.ts","sources":["/home/usuario/juicer/server/src/routers/userRouter.ts"],"names":[],"mappings":";;;AAAA,mCAAmC;AACnC,yCAAoC;AACpC,oDAA+C;AAElC,QAAA,UAAU,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;AAE3C,OAAO;AACP,kBAAU,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;IAC1C,MAAM,IAAI,GAAG,IAAI,WAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAChC,6BAAa,CAAC,UAAU,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;AACtC,CAAC,CAAC,CAAC;AAEH,kBAAU,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;IAC1C,6BAAa,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,EAAE,WAAI,CAAC,CAAC;AAC3C,CAAC,CAAC,CAAC;AAEH,kBAAU,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;IAClD,6BAAa,CAAC,iBAAiB,CAAC,GAAG,EAAE,GAAG,EAAE,WAAI,CAAC,CAAC;AAClD,CAAC,CAAC,CAAC;AAEH,MAAM;AACN,kBAAU,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;IACvC,6BAAa,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AAClC,CAAC,CAAC,CAAC;AAEH,kBAAU,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;IACxC,MAAM,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAA,CAAC,CAAA,EAAC,IAAI,EAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAC,CAAA,CAAC,CAAA,EAAE,CAAC;IACnE,6BAAa,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,EAAE,WAAI,CAAC,CAAC;AACvC,CAAC,CAAC,CAAC;AAEH;;;KAGK;AAEL,QAAQ;AACP,kBAAU,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;IAC3C,MAAM,cAAc,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,aAAa,EAAE,WAAW,EAAE,WAAW,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;IAC9G,MAAM,aAAa,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAC5C,MAAM,aAAa,GACjB,aAAa,CAAC,KAAK,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;IAEnE,IAAI,CAAC,aAAa,EAAE;QAClB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,KAAK,EAAE,yBAAyB;SACjC,CAAC,CAAC;KACJ;SAAM;QACL,6BAAa,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,WAAI,CAAC,CAAC;KACrC;AACH,CAAC,CAAC,CAAC;AAEH;;;;;;;;;;;;;;EAcE;AACF,SAAS;AACT,kBAAU,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;IAC3C,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE;QACnB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,KAAK,EAAE,yBAAyB;SACjC,CAAC,CAAC;KACJ;IACD,6BAAa,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,WAAI,CAAC,CAAC;AACvC,CAAC,CAAC,CAAC;AAEH,kBAAU,CAAC,MAAM,CAAC,gBAAgB,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE;IACrD,6BAAa,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,EAAE,WAAI,CAAC,CAAC;AACzC,CAAC,CAAC,CAAC","sourcesContent":["import * as express from 'express';\nimport {User} from '../models/user';\nimport {JuicerApiCRUD} from '../JuicerApiCRUD';\n\nexport const userRouter = express.Router();\n\n// POST\nuserRouter.post('/api/signup', (req, res) => {\n  const user = new User(req.body);\n  JuicerApiCRUD.postSignUp(res, user);\n});\n\nuserRouter.post('/api/signin', (req, res) => {\n  JuicerApiCRUD.postSignIn(res, req, User);\n});\n\nuserRouter.post('/api/password-reset', (req, res) => {\n  JuicerApiCRUD.postPasswordReset(res, req, User);\n});\n\n// GET\nuserRouter.get('/api/user', (req, res) => {\n  JuicerApiCRUD.getUser(req, res);\n});\n\nuserRouter.get('/api/users', (req, res) => {\n  const filter = req.query.name?{name: req.query.name.toString()}:{};\n  JuicerApiCRUD.get(res, filter, User);\n});\n\n/*\nuserRouter.get('/api/users/:id', (req, res) => {\n  JuicerApiCRUD.idGet(req, res, User);\n});*/\n\n// PATCH\n userRouter.patch('/api/users', (req, res) => {\n  const allowedUpdates = ['name', 'email', 'password', 'description', 'following', 'followers', 'likes', 'age'];\n  const actualUpdates = Object.keys(req.body);\n  const isValidUpdate =\n    actualUpdates.every((update) => allowedUpdates.includes(update));\n\n  if (!isValidUpdate) {\n    res.status(400).send({\n      error: 'Update is not permitted',\n    });\n  } else {\n    JuicerApiCRUD.patch(req, res, User);\n  }\n});\n\n/*\nuserRouter.patch('/api/users/:id', (req, res) => {\n  const allowedUpdates = ['name', 'email', 'password', 'description', 'following', 'followers', 'likes', 'age'];\n  const actualUpdates = Object.keys(req.body);\n  const isValidUpdate =\n      actualUpdates.every((update) => allowedUpdates.includes(update));\n\n  if (!isValidUpdate) {\n    res.status(400).send({\n      error: 'Update is not permitted',\n    });\n  }\n  JuicerApiCRUD.idPatch(req, res, User);\n});\n*/\n// DELETE\nuserRouter.delete('/api/users', (req, res) => {\n  if (!req.query.name) {\n    res.status(400).send({\n      error: 'A name must be provided',\n    });\n  }\n  JuicerApiCRUD.delete(req, res, User);\n});\n\nuserRouter.delete('/api/users/:id', async (req, res) => {\n  JuicerApiCRUD.idDelete(req, res, User);\n});"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9ef03d7545aa34952463ecd61f7ec224307716b2","contentHash":"bba13d44811b178c2abd6c0db17fc770dbd4ffa77bdf9c83a8894f9f82d52f27"},"/home/usuario/juicer/server/src/models/user.ts":{"path":"/home/usuario/juicer/server/src/models/user.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":43}},"2":{"start":{"line":4,"column":19},"end":{"line":4,"column":38}},"3":{"start":{"line":5,"column":20},"end":{"line":5,"column":40}},"4":{"start":{"line":6,"column":0},"end":{"line":60,"column":3}},"5":{"start":{"line":19,"column":12},"end":{"line":21,"column":13}},"6":{"start":{"line":20,"column":16},"end":{"line":20,"column":51}},"7":{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},"8":{"start":{"line":30,"column":16},"end":{"line":30,"column":61}},"9":{"start":{"line":61,"column":0},"end":{"line":61,"column":65}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":18,"column":18},"end":{"line":18,"column":19}},"loc":{"start":{"line":18,"column":29},"end":{"line":22,"column":9}},"line":18},"1":{"name":"(anonymous_1)","decl":{"start":{"line":28,"column":18},"end":{"line":28,"column":19}},"loc":{"start":{"line":28,"column":29},"end":{"line":32,"column":9}},"line":28}},"branchMap":{"0":{"loc":{"start":{"line":19,"column":12},"end":{"line":21,"column":13}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":21,"column":13}},{"start":{"line":19,"column":12},"end":{"line":21,"column":13}}],"line":19},"1":{"loc":{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},"type":"if","locations":[{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},{"start":{"line":29,"column":12},"end":{"line":31,"column":13}}],"line":29}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":1},"f":{"0":0,"1":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/home/usuario/juicer/server/src/models/user.ts","sources":["/home/usuario/juicer/server/src/models/user.ts"],"names":[],"mappings":";;;AAAA,uCAAiD;AACjD,yCAAkC;AAarB,QAAA,UAAU,GAAG,IAAI,iBAAM,CAAwB;IAC1D,IAAI,EAAE;QACJ,IAAI,EAAE,MAAM;QACZ,MAAM,EAAE,IAAI;QACZ,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,IAAI;KACX;IACD,KAAK,EAAE;QACL,IAAI,EAAE,MAAM;QACZ,MAAM,EAAE,IAAI;QACZ,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,IAAI;QACV,QAAQ,EAAE,CAAC,KAAa,EAAE,EAAE;YAC1B,IAAI,CAAC,mBAAS,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;gBAC7B,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAC;aACpC;QACH,CAAC;KACF;IACD,QAAQ,EAAE;QACR,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,IAAI;QACV,QAAQ,EAAE,CAAC,KAAa,EAAE,EAAE;YAC1B,IAAI,CAAC,mBAAS,CAAC,gBAAgB,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAC,CAAC,EAAE;gBACvH,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;aAC9C;QACH,CAAC;KACF;IACD,WAAW,EAAE;QACX,IAAI,EAAE,MAAM;QACZ,OAAO,EAAE,EAAE;QACX,MAAM,EAAE,KAAK;QACb,QAAQ,EAAE,KAAK;QACf,IAAI,EAAE,IAAI;KACX;IACD,SAAS,EAAE;QACT,IAAI,EAAE,MAAM;QACZ,OAAO,EAAE,CAAC;QACV,QAAQ,EAAE,IAAI;KACf;IACD,SAAS,EAAE;QACT,IAAI,EAAE,MAAM;QACZ,OAAO,EAAE,CAAC;QACV,QAAQ,EAAE,IAAI;KACf;IACD,KAAK,EAAE;QACL,IAAI,EAAE,MAAM;QACZ,OAAO,EAAE,CAAC;QACV,QAAQ,EAAE,IAAI;KACf;IACD,GAAG,EAAE;QACH,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,KAAK;KAChB;CACF,CAAC,CAAC;AAEU,QAAA,IAAI,GAAG,IAAA,gBAAK,EAAwB,MAAM,EAAE,kBAAU,CAAC,CAAC","sourcesContent":["import {Document, Schema, model} from 'mongoose';\nimport validator from 'validator';\n\nexport interface UserDocumentInterface extends Document {\n  name: string,\n  email: string,\n  password: string,\n  description: string,\n  following: number,\n  followers: number,\n  likes: number,\n  age: number,\n}\n\nexport const UserSchema = new Schema<UserDocumentInterface>({\n  name: {\n    type: String,\n    unique: true,\n    required: true,\n    trim: true,\n  },\n  email: {\n    type: String,\n    unique: true,\n    required: true,\n    trim: true,\n    validate: (value: string) => {\n      if (!validator.isEmail(value)) {\n        throw new Error('Email not valid');\n      }\n    },\n  },\n  password: {\n    type: String,\n    required: true,\n    trim: true,\n    validate: (value: string) => {\n      if (!validator.isStrongPassword(value, { minLength: 8, minLowercase: 1, minUppercase: 1, minNumbers: 1, minSymbols: 0})) {\n        throw new Error('Must be a strong password');\n      }\n    },\n  },\n  description: {\n    type: String,\n    default: \"\",\n    unique: false,\n    required: false,\n    trim: true,\n  },\n  following: {\n    type: Number,\n    default: 0,\n    required: true,\n  },\n  followers: {\n    type: Number,\n    default: 0,\n    required: true,\n  },\n  likes: {\n    type: Number,\n    default: 0,\n    required: true,\n  },\n  age: {\n    type: Number,\n    required: false,\n  },\n});\n\nexport const User = model<UserDocumentInterface>('User', UserSchema);"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"69043243928961610807cac46a56cedf40248495","contentHash":"b7dd259dfa5d6977a368f690ac4fe6d99f787d2fc6102c2a5049480823b04bb2"},"/home/usuario/juicer/server/src/JuicerApiCRUD.ts":{"path":"/home/usuario/juicer/server/src/JuicerApiCRUD.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"2":{"start":{"line":4,"column":12},"end":{"line":4,"column":35}},"3":{"start":{"line":5,"column":19},"end":{"line":5,"column":40}},"4":{"start":{"line":6,"column":13},"end":{"line":6,"column":42}},"5":{"start":{"line":7,"column":13},"end":{"line":7,"column":42}},"6":{"start":{"line":8,"column":13},"end":{"line":8,"column":31}},"7":{"start":{"line":9,"column":16},"end":{"line":9,"column":23}},"8":{"start":{"line":12,"column":8},"end":{"line":18,"column":9}},"9":{"start":{"line":13,"column":12},"end":{"line":13,"column":33}},"10":{"start":{"line":14,"column":12},"end":{"line":14,"column":49}},"11":{"start":{"line":17,"column":12},"end":{"line":17,"column":37}},"12":{"start":{"line":21,"column":8},"end":{"line":39,"column":9}},"13":{"start":{"line":22,"column":28},"end":{"line":22,"column":103}},"14":{"start":{"line":23,"column":12},"end":{"line":35,"column":13}},"15":{"start":{"line":24,"column":16},"end":{"line":31,"column":19}},"16":{"start":{"line":25,"column":20},"end":{"line":30,"column":21}},"17":{"start":{"line":26,"column":24},"end":{"line":26,"column":68}},"18":{"start":{"line":29,"column":24},"end":{"line":29,"column":78}},"19":{"start":{"line":34,"column":16},"end":{"line":34,"column":102}},"20":{"start":{"line":38,"column":12},"end":{"line":38,"column":58}},"21":{"start":{"line":42,"column":29},"end":{"line":42,"column":57}},"22":{"start":{"line":43,"column":8},"end":{"line":56,"column":9}},"23":{"start":{"line":44,"column":32},"end":{"line":44,"column":58}},"24":{"start":{"line":45,"column":12},"end":{"line":52,"column":15}},"25":{"start":{"line":46,"column":16},"end":{"line":51,"column":17}},"26":{"start":{"line":47,"column":20},"end":{"line":47,"column":84}},"27":{"start":{"line":50,"column":20},"end":{"line":50,"column":58}},"28":{"start":{"line":55,"column":12},"end":{"line":55,"column":83}},"29":{"start":{"line":59,"column":8},"end":{"line":77,"column":9}},"30":{"start":{"line":60,"column":28},"end":{"line":60,"column":74}},"31":{"start":{"line":61,"column":12},"end":{"line":73,"column":13}},"32":{"start":{"line":62,"column":16},"end":{"line":69,"column":19}},"33":{"start":{"line":63,"column":20},"end":{"line":68,"column":21}},"34":{"start":{"line":64,"column":24},"end":{"line":64,"column":57}},"35":{"start":{"line":67,"column":24},"end":{"line":67,"column":51}},"36":{"start":{"line":72,"column":16},"end":{"line":72,"column":91}},"37":{"start":{"line":76,"column":12},"end":{"line":76,"column":58}},"38":{"start":{"line":80,"column":8},"end":{"line":89,"column":9}},"39":{"start":{"line":81,"column":29},"end":{"line":81,"column":53}},"40":{"start":{"line":82,"column":12},"end":{"line":84,"column":13}},"41":{"start":{"line":83,"column":16},"end":{"line":83,"column":54}},"42":{"start":{"line":85,"column":12},"end":{"line":85,"column":66}},"43":{"start":{"line":88,"column":12},"end":{"line":88,"column":58}},"44":{"start":{"line":105,"column":29},"end":{"line":105,"column":57}},"45":{"start":{"line":106,"column":8},"end":{"line":131,"column":9}},"46":{"start":{"line":107,"column":32},"end":{"line":107,"column":58}},"47":{"start":{"line":108,"column":12},"end":{"line":127,"column":15}},"48":{"start":{"line":109,"column":16},"end":{"line":126,"column":17}},"49":{"start":{"line":110,"column":20},"end":{"line":110,"column":84}},"50":{"start":{"line":113,"column":20},"end":{"line":125,"column":21}},"51":{"start":{"line":114,"column":40},"end":{"line":117,"column":26}},"52":{"start":{"line":118,"column":24},"end":{"line":120,"column":25}},"53":{"start":{"line":119,"column":28},"end":{"line":119,"column":93}},"54":{"start":{"line":121,"column":24},"end":{"line":121,"column":49}},"55":{"start":{"line":124,"column":24},"end":{"line":124,"column":47}},"56":{"start":{"line":130,"column":12},"end":{"line":130,"column":83}},"57":{"start":{"line":150,"column":8},"end":{"line":159,"column":9}},"58":{"start":{"line":151,"column":28},"end":{"line":151,"column":93}},"59":{"start":{"line":152,"column":12},"end":{"line":154,"column":13}},"60":{"start":{"line":153,"column":16},"end":{"line":153,"column":46}},"61":{"start":{"line":155,"column":12},"end":{"line":155,"column":37}},"62":{"start":{"line":158,"column":12},"end":{"line":158,"column":42}},"63":{"start":{"line":162,"column":8},"end":{"line":171,"column":9}},"64":{"start":{"line":163,"column":28},"end":{"line":163,"column":72}},"65":{"start":{"line":164,"column":12},"end":{"line":166,"column":13}},"66":{"start":{"line":165,"column":16},"end":{"line":165,"column":46}},"67":{"start":{"line":167,"column":12},"end":{"line":167,"column":37}},"68":{"start":{"line":170,"column":12},"end":{"line":170,"column":42}},"69":{"start":{"line":174,"column":0},"end":{"line":174,"column":38}},"70":{"start":{"line":176,"column":4},"end":{"line":197,"column":5}},"71":{"start":{"line":177,"column":28},"end":{"line":186,"column":10}},"72":{"start":{"line":187,"column":8},"end":{"line":192,"column":11}},"73":{"start":{"line":193,"column":8},"end":{"line":193,"column":73}},"74":{"start":{"line":196,"column":8},"end":{"line":196,"column":43}},"75":{"start":{"line":200,"column":4},"end":{"line":209,"column":5}},"76":{"start":{"line":201,"column":8},"end":{"line":203,"column":9}},"77":{"start":{"line":202,"column":12},"end":{"line":202,"column":154}},"78":{"start":{"line":204,"column":8},"end":{"line":205,"column":59}},"79":{"start":{"line":205,"column":12},"end":{"line":205,"column":59}},"80":{"start":{"line":208,"column":8},"end":{"line":208,"column":61}},"81":{"start":{"line":212,"column":18},"end":{"line":212,"column":43}},"82":{"start":{"line":213,"column":17},"end":{"line":213,"column":20}},"83":{"start":{"line":214,"column":16},"end":{"line":214,"column":24}},"84":{"start":{"line":215,"column":4},"end":{"line":220,"column":5}},"85":{"start":{"line":216,"column":8},"end":{"line":216,"column":25}},"86":{"start":{"line":219,"column":8},"end":{"line":219,"column":37}},"87":{"start":{"line":221,"column":4},"end":{"line":221,"column":94}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":42},"end":{"line":19,"column":5}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":45},"end":{"line":40,"column":5}},"line":20},"2":{"name":"(anonymous_2)","decl":{"start":{"line":24,"column":76},"end":{"line":24,"column":77}},"loc":{"start":{"line":24,"column":92},"end":{"line":31,"column":17}},"line":24},"3":{"name":"(anonymous_3)","decl":{"start":{"line":41,"column":4},"end":{"line":41,"column":5}},"loc":{"start":{"line":41,"column":29},"end":{"line":57,"column":5}},"line":41},"4":{"name":"(anonymous_4)","decl":{"start":{"line":45,"column":49},"end":{"line":45,"column":50}},"loc":{"start":{"line":45,"column":68},"end":{"line":52,"column":13}},"line":45},"5":{"name":"(anonymous_5)","decl":{"start":{"line":58,"column":4},"end":{"line":58,"column":5}},"loc":{"start":{"line":58,"column":52},"end":{"line":78,"column":5}},"line":58},"6":{"name":"(anonymous_6)","decl":{"start":{"line":62,"column":76},"end":{"line":62,"column":77}},"loc":{"start":{"line":62,"column":92},"end":{"line":69,"column":17}},"line":62},"7":{"name":"(anonymous_7)","decl":{"start":{"line":79,"column":4},"end":{"line":79,"column":5}},"loc":{"start":{"line":79,"column":41},"end":{"line":90,"column":5}},"line":79},"8":{"name":"(anonymous_8)","decl":{"start":{"line":104,"column":4},"end":{"line":104,"column":5}},"loc":{"start":{"line":104,"column":40},"end":{"line":132,"column":5}},"line":104},"9":{"name":"(anonymous_9)","decl":{"start":{"line":108,"column":49},"end":{"line":108,"column":50}},"loc":{"start":{"line":108,"column":74},"end":{"line":127,"column":13}},"line":108},"10":{"name":"(anonymous_10)","decl":{"start":{"line":149,"column":4},"end":{"line":149,"column":5}},"loc":{"start":{"line":149,"column":41},"end":{"line":160,"column":5}},"line":149},"11":{"name":"(anonymous_11)","decl":{"start":{"line":161,"column":4},"end":{"line":161,"column":5}},"loc":{"start":{"line":161,"column":43},"end":{"line":172,"column":5}},"line":161},"12":{"name":"sendEmail","decl":{"start":{"line":175,"column":15},"end":{"line":175,"column":24}},"loc":{"start":{"line":175,"column":42},"end":{"line":198,"column":1}},"line":175},"13":{"name":"handleErrors","decl":{"start":{"line":199,"column":15},"end":{"line":199,"column":27}},"loc":{"start":{"line":199,"column":38},"end":{"line":210,"column":1}},"line":199},"14":{"name":"handleDuplicateKeyError","decl":{"start":{"line":211,"column":9},"end":{"line":211,"column":32}},"loc":{"start":{"line":211,"column":43},"end":{"line":222,"column":1}},"line":211}},"branchMap":{"0":{"loc":{"start":{"line":23,"column":12},"end":{"line":35,"column":13}},"type":"if","locations":[{"start":{"line":23,"column":12},"end":{"line":35,"column":13}},{"start":{"line":23,"column":12},"end":{"line":35,"column":13}}],"line":23},"1":{"loc":{"start":{"line":25,"column":20},"end":{"line":30,"column":21}},"type":"if","locations":[{"start":{"line":25,"column":20},"end":{"line":30,"column":21}},{"start":{"line":25,"column":20},"end":{"line":30,"column":21}}],"line":25},"2":{"loc":{"start":{"line":43,"column":8},"end":{"line":56,"column":9}},"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":56,"column":9}},{"start":{"line":43,"column":8},"end":{"line":56,"column":9}}],"line":43},"3":{"loc":{"start":{"line":46,"column":16},"end":{"line":51,"column":17}},"type":"if","locations":[{"start":{"line":46,"column":16},"end":{"line":51,"column":17}},{"start":{"line":46,"column":16},"end":{"line":51,"column":17}}],"line":46},"4":{"loc":{"start":{"line":61,"column":12},"end":{"line":73,"column":13}},"type":"if","locations":[{"start":{"line":61,"column":12},"end":{"line":73,"column":13}},{"start":{"line":61,"column":12},"end":{"line":73,"column":13}}],"line":61},"5":{"loc":{"start":{"line":63,"column":20},"end":{"line":68,"column":21}},"type":"if","locations":[{"start":{"line":63,"column":20},"end":{"line":68,"column":21}},{"start":{"line":63,"column":20},"end":{"line":68,"column":21}}],"line":63},"6":{"loc":{"start":{"line":82,"column":12},"end":{"line":84,"column":13}},"type":"if","locations":[{"start":{"line":82,"column":12},"end":{"line":84,"column":13}},{"start":{"line":82,"column":12},"end":{"line":84,"column":13}}],"line":82},"7":{"loc":{"start":{"line":106,"column":8},"end":{"line":131,"column":9}},"type":"if","locations":[{"start":{"line":106,"column":8},"end":{"line":131,"column":9}},{"start":{"line":106,"column":8},"end":{"line":131,"column":9}}],"line":106},"8":{"loc":{"start":{"line":109,"column":16},"end":{"line":126,"column":17}},"type":"if","locations":[{"start":{"line":109,"column":16},"end":{"line":126,"column":17}},{"start":{"line":109,"column":16},"end":{"line":126,"column":17}}],"line":109},"9":{"loc":{"start":{"line":118,"column":24},"end":{"line":120,"column":25}},"type":"if","locations":[{"start":{"line":118,"column":24},"end":{"line":120,"column":25}},{"start":{"line":118,"column":24},"end":{"line":120,"column":25}}],"line":118},"10":{"loc":{"start":{"line":152,"column":12},"end":{"line":154,"column":13}},"type":"if","locations":[{"start":{"line":152,"column":12},"end":{"line":154,"column":13}},{"start":{"line":152,"column":12},"end":{"line":154,"column":13}}],"line":152},"11":{"loc":{"start":{"line":164,"column":12},"end":{"line":166,"column":13}},"type":"if","locations":[{"start":{"line":164,"column":12},"end":{"line":166,"column":13}},{"start":{"line":164,"column":12},"end":{"line":166,"column":13}}],"line":164},"12":{"loc":{"start":{"line":201,"column":8},"end":{"line":203,"column":9}},"type":"if","locations":[{"start":{"line":201,"column":8},"end":{"line":203,"column":9}},{"start":{"line":201,"column":8},"end":{"line":203,"column":9}}],"line":201},"13":{"loc":{"start":{"line":204,"column":8},"end":{"line":205,"column":59}},"type":"if","locations":[{"start":{"line":204,"column":8},"end":{"line":205,"column":59}},{"start":{"line":204,"column":8},"end":{"line":205,"column":59}}],"line":204},"14":{"loc":{"start":{"line":204,"column":12},"end":{"line":204,"column":41}},"type":"binary-expr","locations":[{"start":{"line":204,"column":12},"end":{"line":204,"column":20}},{"start":{"line":204,"column":24},"end":{"line":204,"column":41}}],"line":204},"15":{"loc":{"start":{"line":215,"column":4},"end":{"line":220,"column":5}},"type":"if","locations":[{"start":{"line":215,"column":4},"end":{"line":220,"column":5}},{"start":{"line":215,"column":4},"end":{"line":220,"column":5}}],"line":215}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":1,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"inputSourceMap":{"version":3,"file":"/home/usuario/juicer/server/src/JuicerApiCRUD.ts","sources":["/home/usuario/juicer/server/src/JuicerApiCRUD.ts"],"names":[],"mappings":"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","sourcesContent":["import {UserDocumentInterface} from './models/user';\nimport * as jwt from 'jsonwebtoken';\nimport * as nodemailer from 'nodemailer';\n\n\nconst HOST = 'juicerappofficial@gmail.com'// email host\nconst USER = 'juicerappofficial@gmail.com'// email id\nconst PASS = 'plsoovkmdwvujbgb'// email password\nconst SERVICE = 'Gmail'// email service\n\n\nexport class JuicerApiCRUD {\n\n  public static async postSignUp(res: any, element: UserDocumentInterface) {\n    try {\n      await element.save();\n      return res.status(201).send(element);\n    } catch (error) {\n      handleErrors(error, res);\n    }\n  }\n \n  public static async postSignIn(res: any, req: any, model: any) {\n    try {\n      const element = await model.findOne({email:req.body.email, password:req.body.password});\n\n      if (element) {\n        jwt.sign({element}, 'secretkey', {'expiresIn': '300s'}, (err: any, token: any) => {\n          if (err) {\n            return res.status(500).send({error: err});\n          } else {\n            return res.status(200).send({user: element, token});\n          }\n        });\n      } else {\n        return res.status(404).send({error:'Correo electrónico o contraseña incorrectos'});\n      }\n    } catch (error) {\n      return res.status(500).send({error: error});\n    }\n  }\n\n  public static getUser(req: any, res: any){\n    const bearerHeader =  req.headers['authorization'];\n\n    if (typeof bearerHeader !== 'undefined'){\n      const bearerToken = bearerHeader.split(\" \")[1];\n\n      jwt.verify(bearerToken, 'secretkey', (err: any, authData: any) => {\n        if (err){\n          return res.status(403).send({error: 'La sesión ha expirado'});\n        } else {\n          return res.status(200).send(authData);\n        }\n      });\n    } else {\n      return res.status(400).send({error: 'Debe proporcionarse un token'});\n    }\n  }\n\n  public static async postPasswordReset(res: any, req: any, model: any) {\n    try {\n      const element = await model.findOne({email: req.body.email});\n\n      if (element) {\n        jwt.sign({element}, 'secretkey', {'expiresIn': '300s'}, (err: any, token: any) => {\n          if (err) {\n            return res.status(500).send(err);\n          } else {\n            sendEmail(res, req, token);\n          }\n        });\n      } else {\n        return res.status(404).send({error: 'Correo electrónico no registrado'});\n      }\n    } catch (error) {\n      return res.status(500).send({error: error});\n    }\n  }\n\n  public static async get(res: any, filter: any, model: any) {\n    try {\n      const elements = await model.find(filter);\n\n      if (elements.length !== 0) {\n        return res.status(200).send(elements);\n      }\n      return res.status(404).send('Elemento no encontrado');\n    } catch (error) {\n      return res.status(500).send({error: error});\n    }\n  }\n  /*\n  public static async idGet(req: any, res: any, model: any) {\n    try {\n      const element = await model.findById(req.params.id);\n\n      if (!element) {\n        return res.status(404).send();\n      }\n      return res.send(element);\n    } catch (error) {\n      return res.status(500).send();\n    }\n  }*/\n\n  public static async patch(req: any, res: any, model: any) {\n    const bearerHeader =  req.headers['authorization'];\n    if (typeof bearerHeader !== 'undefined') {\n      const bearerToken = bearerHeader.split(\" \")[1];\n\n      jwt.verify(bearerToken, 'secretkey', async (err: any, authData: any) => {\n        if (err) {\n          return res.status(403).send({error: 'La sesión ha expirado'});\n        } else {\n          try {\n            const element = await model.findOneAndUpdate({name: authData.element.name}, req.body, {\n              new: true,\n              runValidators: true,\n            });\n      \n            if (!element) {\n              return res.status(404).send({error: 'Elemento no encontrado'});\n            }\n        \n            return res.send(element);\n          } catch (err) {\n            handleErrors(err, res);\n          }\n        }\n      });\n    } else {\n      return res.status(400).send({error: 'Debe proporcionarse un token'});\n    }\n  }\n  /*\n  public static async idPatch(req: any, res: any, model: any) {\n    try {\n      const element = await model.findByIdAndUpdate(req.params.id, req.body, {\n        new: true,\n        runValidators: true,\n      });\n\n      if (!element) {\n        return res.status(404).send();\n      }\n      return res.send(element);\n    } catch (error) {\n      return res.status(400).send(error);\n    }\n  }*/\n\n  public static async delete(req: any, res: any, model: any) {\n    try {\n      const element = await model.findOneAndDelete({name: req.query.name.toString()});\n\n      if (!element) {\n        return res.status(404).send();\n      }\n\n      return res.send(element);\n    } catch (error) {\n      return res.status(400).send();\n    }\n  }\n\n  public static async idDelete(req: any, res: any, model: any) {\n    try {\n      const element = await model.findByIdAndDelete(req.params.id);\n\n      if (!element) {\n        return res.status(404).send();\n      }\n\n      return res.send(element);\n    } catch (error) {\n      return res.status(400).send();\n    }\n  }\n}\n\n\nasync function sendEmail(res: any, req: any, token: string) {\n  try {\n    const transporter = nodemailer.createTransport({\n      host: HOST,\n      service: SERVICE,\n      port: 587,\n      secure: true,\n      auth: {\n          user: USER,\n          pass: PASS,\n      },\n    });\n    await transporter.sendMail({\n      from: USER,\n      to: req.body.email,\n      subject: 'Password reset',\n      text: `Click here to reset password: http://10.6.130.29/reset/${token}`,\n    });\n    return res.status(200).send({mssg:\"email sent successfully\"});\n\n  } catch (error) {\n    return res.status(500).send(error);\n  }\n}\n\nasync function handleErrors(err: any, res: any) {\n  try {\n    if(err.name === 'ValidationError') {\n      return res.status(400).send({error: \"La contraseña debe contener al menos ocho caracteres, un número y una mayúscula\", fields: 'password'});\n    }\n    if(err.code && err.code == 11000) return err = handleDuplicateKeyError(err, res);\n  } catch(err) {\n    res.status(500).send({error: 'Error desconocido'});\n  }\n}\n\nfunction handleDuplicateKeyError(err: any, res: any) {\n  const field = Object.keys(err.keyValue);\n  const code = 409;\n  var campo = field[0];\n  if (campo === 'name') {\n    campo = 'nombre';\n  } else {\n    campo = 'correo electrónico';\n  }\n  res.status(code).send({error: `Ya existe una cuenta con ese ${campo}.`, fields: field});\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"38202aa6c3dac1b8f8368ec48d91d334d8ba0a1e","contentHash":"18767726b2ebf3490b3e4c9eda38e63d2fdf924376a1f2b7894f6243f19a94df"},"/home/usuario/juicer/server/src/routers/default.ts":{"path":"/home/usuario/juicer/server/src/routers/default.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"2":{"start":{"line":5,"column":16},"end":{"line":5,"column":34}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":41}},"4":{"start":{"line":10,"column":0},"end":{"line":12,"column":3}},"5":{"start":{"line":11,"column":4},"end":{"line":11,"column":27}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":10,"column":31},"end":{"line":10,"column":32}},"loc":{"start":{"line":10,"column":43},"end":{"line":12,"column":1}},"line":10}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/usuario/juicer/server/src/routers/default.ts","sources":["/home/usuario/juicer/server/src/routers/default.ts"],"names":[],"mappings":";;;AAAA,4BAA4B;AAC5B,mCAAmC;AAEtB,QAAA,aAAa,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;AAE9C;;GAEG;AACH,qBAAa,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,EAAE;IAChC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;AACzB,CAAC,CAAC,CAAC","sourcesContent":["/* eslint-disable new-cap */\nimport * as express from 'express';\n\nexport const defaultRouter = express.Router();\n\n/**\n * Ruta por defecto\n */\ndefaultRouter.all('*', (_, res) => {\n  res.status(501).send();\n});"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"62b61687cc4144a6ad775d50cb497e0362f73313","contentHash":"5172abd0aa273545c898c4c8edfeed3c3291a3a26ce5c6efdf2c9a893face0f7"}}